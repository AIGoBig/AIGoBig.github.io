# 多用户

**一个用户可以属于多个组，一个组可以有多个用户，用户和组是多对多的关系。**

linux的多用户多分组管理系统都是**针对文件**来说的，**每个文件都有所属的用户和所属的分组。**

## 用户种类

linux系统是**根据用户UID来识别用户的**，并不是根据用户名。linux用户分为以下3种：

- **root用户，也叫超级用户(UID为0)**：该用户具有最高权限，**可以操作任何文件，尽管文件权限是000。**在linux字符操作页面中，root账号的提示符为**#**。
- **系统用户(UID为1-499)**：系统用户是linux系统正常运行的内建用户，**通常是为了管理某种服务**，如ftp服务，以及sshd服务等。**系统用户是不能用来登录的**。
- **普通用户(UID大于500)**：普通用户是为了合理管理linux资源而建立的用户。在linux的字符操作页面，普通用户的提示符一般为**$**。

## 查看系统所有用户

- 在/etc/passwd文件中存储着系统的所有用户，使用如下命令查看

```undefined
cat /etc/passwd
```

<img src="https:////upload-images.jianshu.io/upload_images/15579250-112d5cfddef75676.png?imageMogr2/auto-orient/strip|imageView2/2/w/944/format/webp" alt="img" style="zoom:50%;" />



> 每行数据为一个用户，可以看到红色部分为root超级用户，蓝色部分为系统用户，绿色部分为普通用户。
>
> 可以看出图片中每行数据**大致7段**，使用：作为分隔符，格式如下：**用户名：X：UID(用户id)：GID(组id)：用户说明：用户家目录：Shell版本**
>
> 1. 用户名：用户名只是管理员方便记忆，**系统是根据UID来识别用户的**。使用命令`useradd userName`或者`adduser userName`来创建新的用户
>
> 2. x: 代表的是**密码标志**，而不是真正的密码。如果第二段是x则代表该用户有密码，如果没有x则代表该用户没有密码。用户真正的密码保存在/etc/shadow文件中，该文件的权限是`000`,也就是说只有root用户才能查看。
>
> 3. UID:用户id，要知道linux系统就是通过用户id来识别不同的用户和分配不同的权限的。
>
> 4. GID:此字段意思为组id，更确切的说是`初始组id`。说到初始组就得说说`初始组`和`附加组`的概念了。
>
>    1.  所谓初始组，新建一个用户后，系统会自动新建一个与该用户名相同的组，并将该用户分配到该组中，该组就是该用户的初始组。每个用户的初始组只能有一个，举例来说，我们手工添加用户`useradd lamp`，在建立用户 lamp 的同时也会创建lamp的组名。还有一个注意的点，就是新建用户的UID和GID一般是相同的。
>    2.  所谓附加组：指用户后期可以加入多个其他的用户组，并拥有这些组的权限。每个用户只能有一个初始组，附加组却可以有多个，此时用户的权限就是初始组的权限+附属组的权限。
>        需要注意：在 /etc/passwd 文件的第四个字段中看到的 ID 是这个用户的初始组。
>
> 5. 用户说明：这个用户的简单说明，没有什么特殊作用，可以不写。
>
> 6. 用户家目录：
>
>    **也就是用户登录后有操作权限的访问目录，我们把这个目录称为用户的家目录。**
>
>    **通常都会在/home下自动创建与用户名同名的用户家目录**
>
>    举个例子，创建新用户useradd db,这是用户db的家目录是/home/db
>
>    简单说就是**root用户的家目录是 /root 目录，普通用户是 /home/userName下.**
>
>    **在linux字符操作页面的`~`就是指当前用户的家目录。**
>
> 7. shell命令：**linux默认是/bin/bash**,写过shell脚本的都应该知道。
>
>    - **所有用户都是可以查看此文件的**，我们可以查看该文件的`ll`。
>
>    ```ruby
>    [db@002 ~]$ ll /etc/passwdll /etc/passwdll /etc/passwd
>    -rw-r--r-- 1 root root 1194 Feb 20 21:31 /etc/passwd
>    ```
>
>    我们可以看到**该文件属于root用户和root组**。然后**root用户权限是rw-**，root组内成员的权限是r--,而其他用户的权限是r--。由于其他用户的权限都是r--，**所以任何用户都是可以读的。**

## 查看系统所有组

在/etc/group文件中存储着系统的所有组,查看文件内容，如下图

<img src="https:////upload-images.jianshu.io/upload_images/15579250-b00337c32c4027c4.png?imageMogr2/auto-orient/strip|imageView2/2/w/546/format/webp" alt="img" style="zoom:50%;" />



大致分为4段：

1. 组名：上面介绍过，不在赘述
2. 密码：x代码加密标示，和passwd文件中类似。group的组密码保存在 /etc/gshadow 文件中。
3. GID:组id
4. **组内成员**：此段如果为空，则代表该组只有一个用户，也就是与组名相同的用户。如果有值，则说明此组中含有与该值相同的用户，也就是说此组是该用户的附属组。

我们可以看到图中mail分组的第4段有值为postfix,也就是postfix用户应该有俩个分组，一个初始组和一个附属组，我们执行以下命令验证



```swift
[root@002 home]# groups postfix
postfix : postfix mail
```

## 密码文件介绍

**用户密码文件shadow和组密码文件gshadow的权限都是000**，所有其他用户是不能查看的，**只有root用户才可以查看，root用户也是不能修改该文件的。**





## 文件权限

### 含义

`ls -l`

<img src="/img/in-post/20_07/03-01-02.png" alt="03-01-02.png" style="zoom:50%;" />

> group 新建的一个group
>
> others 其他任意的人

### 修改文件权限

`chmod u+r t1.py`

> u/g/o/a(all) + r/w/x filename

`chmod u-r t1.py`

`chmod ug+r t1.py`

`chmod ug-rw t1.py`

### 可以直接运行 ./t1.py 的条件

1. 权限加上x
2. #!/usr/bin/python3



# 进程

查看、筛选进程

`ps -ef |grep "diodon"`



# 远程

## ssh对linux远程操控

获取执行权限 — ssh

`sudo apt-get install openssh-server`

> 在linux装一个server(服务器)



## 单个文件

### `ssh stusun@192.168.31.31 python3 < testcode.py`

![image-20200823215400232](/img/in-post/20_07/image-20200823215400232.png)

### `scp`命令

```
scp ~/Desktop/{a,b}.py morvan@192.168.0.114:~/Desktop
ssh morvan@192.168.0.114 "python3 ~/Desktop/a.py"
scp morvan@192.168.0.114:~/Desktop/b.py ~/Desktop/result    
```

## 同步编辑

### 在linux上设置共享文件夹 





# 参考

[莫烦Python教程](https://mofanpy.com/tutorials/others/linux-basic/share-folder/#Mac%20%E6%89%BE%E5%88%B0%E4%BA%91%E7%AB%AF%E7%9A%84%E5%88%86%E4%BA%AB%E6%96%87%E4%BB%B6%E5%A4%B9)

















































