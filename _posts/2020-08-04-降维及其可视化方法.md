# 降维可视化方法

## 一、Visualizing Data using t-SNE

- Reference
  - 论文链接：http://www.jmlr.org/papers/volume9/vandermaaten08a/vandermaaten08a.pdf
  - 参数含义:  https://blog.csdn.net/hustqb/article/details/78144384
  - 从SNE到t-SNE再到LargeVis: https://bindog.github.io/blog/2016/06/04/from-sne-to-tsne-to-largevis/
  - t-SNE完整代码及笔记: http://www.datakit.cn/blog/2017/02/05/t_sne_full.html
- t-SNE(t-distributed stochastic neighbor embedding)是用于**降维**的一种机器学习算法，是由 Laurens van der Maaten 和 Geoffrey Hinton在08年提出来。此外，t-SNE 是一种**非线性降维算法，非常适用于高维数据降维到2维或者3维，进行可视化。**

- **t-SNE是目前来说效果最好的数据降维与可视化方法**，但是它的缺点也很明显，比如：占内存大，运行时间长。但是，当我们想要对高维数据进行分类，又不清楚这个数据集有没有很好的可分性（即同类之间间隔小，异类之间间隔大），可以**通过t-SNE投影到2维或者3维的空间中观察**一下。**==如果在低维空间中具有可分性，则数据是可分的；如果在高维空间中不具有可分性，可能是数据不可分，也可能仅仅是因为不能投影到低维空间==。**
- 使用t-SNE的缺点大概是：
  - t-SNE的计算复杂度很高，在数百万个样本数据集中可能需要几个小时，而PCA可以在几秒钟或几分钟内完成
  - Barnes-Hut t-SNE方法（下面讲）限于二维或三维嵌入。
  - 算法是随机的，具有不同种子的多次实验可以产生不同的结果。虽然选择loss最小的结果就行，但可能需要多次实验以选择超参数。
  - 全局结构未明确保留。这个问题可以通过PCA初始化点（使用`init ='pca'`）来缓解。



![t-sne动画](/img/in-post/20_07/fe6782ce2f1b7875.gif)

![img](/img/in-post/20_07/v2-6b2ea2764ac466409899e61db3acce96_1440w.png)

> 相对于PCA来说，t-SNE可以说是一种更高级有效的方法，图为t-SNE和PCA在手写数字体上的效果对比。从结果可以看出PCA降到二维后基本混到一起来，很难进行区分。而t-SNE的效果非常的不错。

```python
from sklearn.manifold import TSNE
from sklearn.datasets import load_iris,load_digits
from sklearn.decomposition import PCA
import matplotlib.pyplot as plt
import os

digits = load_digits()
X_tsne = TSNE(n_components=2,random_state=33).fit_transform(digits.data)
X_pca = PCA(n_components=2).fit_transform(digits.data)

ckpt_dir="images"
if not os.path.exists(ckpt_dir):
    os.makedirs(ckpt_dir)

plt.figure(figsize=(10, 5))
plt.subplot(121)
plt.scatter(X_tsne[:, 0], X_tsne[:, 1], c=digits.target,label="t-SNE")
plt.legend()
plt.subplot(122)
plt.scatter(X_pca[:, 0], X_pca[:, 1], c=digits.target,label="PCA")
plt.legend()
plt.savefig('images/digits_tsne-pca.png', dpi=120)
plt.show()
```

#### t-SNE对比PCA

- **t-SNE主要是关注数据的局部结构**。
-  PCA 并不关心局部的最近邻关系，此外 PCA 是一种线性方法，所以它表征非线性关系可能效果并不是很好。不过 PCA 算法在压缩数据为更小的特征向量而投入到预测算法中有很好地表现，这一点它要比 t-SNE 效果更好。

#### **manifold的一种**

- **manifold**：可以称之为流形数据。像绳结一样的数据，虽然在高维空间中可分，但是在人眼所看到的低维空间中，绳结中的绳子是互相重叠的不可分的。
- [sklearn官方文档](http://scikit-learn.org/stable/modules/manifold.html#manifold)