<h1 id="åŸç†">åŸç†</h1>
<h2 id="textrankæ€»ç»“">Textrankæ€»ç»“</h2>
<h3 id="textrankç‰¹ç‚¹">TextRankç‰¹ç‚¹ï¼š</h3>
<p>æ­¤ç§ç®—æ³•çš„ä¸€ä¸ªé‡è¦ç‰¹ç‚¹æ˜¯å¯ä»¥<strong>è„±ç¦»è¯­æ–™åº“</strong>çš„èƒŒæ™¯ï¼Œ<strong>ä»…å¯¹å•ç¯‡æ–‡æ¡£</strong>è¿›è¡Œåˆ†æå°±å¯ä»¥æå–è¯¥æ–‡æ¡£çš„å…³é”®è¯ã€‚åŸºæœ¬æ€æƒ³æ¥æºäºGoogleçš„PageRankç®—æ³•ã€‚</p>
<p>ä¸PageRankä¸åŒçš„æ˜¯ï¼ŒPageRankä¸­æ˜¯æœ‰å‘è¾¹ï¼Œè€ŒTextRankä¸­æ˜¯æ— å‘è¾¹ï¼Œæˆ–è€…è¯´æ˜¯åŒå‘è¾¹ã€‚</p>
<h3 id="textrank-ç”¨äºå…³é”®è¯æå–çš„ç®—æ³•æµç¨‹å¦‚ä¸‹">TextRank ç”¨äºå…³é”®è¯æå–çš„<strong>ç®—æ³•æµç¨‹</strong>å¦‚ä¸‹ï¼š</h3>
<ol type="1">
<li>æŠŠç»™å®šçš„æ–‡æœ¬ T æŒ‰ç…§å®Œæ•´å¥å­è¿›è¡Œ<strong>åˆ†å‰²</strong>ï¼Œå³:T=[S1,S2,â€¦,Sm]</li>
<li>å¯¹äºæ¯ä¸ªå¥å­ï¼Œè¿›è¡Œåˆ†è¯å’Œ<strong>è¯æ€§æ ‡æ³¨</strong>å¤„ç†ï¼Œå¹¶è¿‡æ»¤æ‰åœç”¨è¯ï¼Œ<strong>åªä¿ç•™æŒ‡å®šè¯æ€§çš„å•è¯</strong>ï¼Œå¦‚åè¯ã€åŠ¨è¯ã€å½¢å®¹è¯ï¼Œå…¶ä¸­ ti,j æ˜¯ä¿ç•™åçš„å€™é€‰å…³é”®è¯ã€‚Si=[ti,1,ti,2,â€¦,ti,n]</li>
<li><strong>æ„å»ºå€™é€‰å…³é”®è¯å›¾</strong> G = (V,E)ï¼Œå…¶ä¸­ V ä¸ºèŠ‚ç‚¹é›†ï¼Œç”±ï¼ˆ2ï¼‰ç”Ÿæˆçš„å€™é€‰å…³é”®è¯ç»„æˆï¼Œç„¶åé‡‡ç”¨å…±ç°å…³ç³»ï¼ˆCo-Occurrenceï¼‰æ„é€ ä»»ä¸¤ç‚¹ä¹‹é—´çš„è¾¹ï¼Œä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´å­˜åœ¨è¾¹ä»…å½“å®ƒä»¬å¯¹åº”çš„è¯æ±‡åœ¨é•¿åº¦ä¸ºK çš„çª—å£ä¸­å…±ç°ï¼ŒKè¡¨ç¤ºçª—å£å¤§å°ï¼Œå³æœ€å¤šå…±ç° K ä¸ªå•è¯ã€‚</li>
<li>æ ¹æ® TextRank çš„å…¬å¼ï¼Œ<strong>è¿­ä»£ä¼ æ’­å„èŠ‚ç‚¹çš„æƒé‡</strong>ï¼Œç›´è‡³æ”¶æ•›ã€‚</li>
<li>å¯¹èŠ‚ç‚¹æƒé‡è¿›è¡Œ<strong>å€’åºæ’åº</strong>ï¼Œä»è€Œå¾—åˆ°æœ€é‡è¦çš„ T ä¸ªå•è¯ï¼Œä½œä¸ºå€™é€‰å…³é”®è¯ã€‚</li>
<li>ç”±ï¼ˆ5ï¼‰å¾—åˆ°æœ€é‡è¦çš„ T ä¸ªå•è¯ï¼Œåœ¨åŸå§‹æ–‡æœ¬ä¸­è¿›è¡Œ<strong>æ ‡è®°</strong>ï¼Œè‹¥å½¢æˆç›¸é‚»è¯ç»„ï¼Œåˆ™ç»„åˆæˆå¤šè¯å…³é”®è¯ã€‚</li>
</ol>
<h3 id="è¿­ä»£è®¡ç®—å…¬å¼">è¿­ä»£è®¡ç®—å…¬å¼ï¼š</h3>
<p><img src="https://cdn.jsdelivr.net/gh/sunqinghu/PicRepo/img/2020/v2-04b2c330a7f471e8b93f78963e6c1619_720w-20210501200224199.jpg" alt="img" style="zoom: 50%;" /></p>
<p>å¯ä»¥çœ‹å‡ºï¼Œè¯¥å…¬å¼ä»…ä»…æ¯”PageRank<strong>å¤šäº†ä¸€ä¸ªæƒé‡é¡¹Wji</strong>ï¼Œç”¨æ¥è¡¨ç¤º<strong>ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´çš„è¾¹è¿æ¥æœ‰ä¸åŒçš„é‡è¦ç¨‹åº¦</strong>ã€‚è€ƒè™‘åˆ°ä¸åŒè¯å¯¹å¯èƒ½æœ‰ä¸åŒçš„å…±ç°ï¼ˆco-occurrenceï¼‰ï¼Œ<strong>TextRankå°†å…±ç°ä½œä¸ºæ— å‘å›¾è¾¹çš„æƒå€¼</strong>ã€‚</p>
<h3 id="å…³é”®è¯æå–åº”ç”¨">å…³é”®è¯æå–åº”ç”¨</h3>
<h4 id="textrankç”¨äºå…³é”®è¯æå–">TextRankç”¨äºå…³é”®è¯æå–</h4>
<h4 id="textrankç®—æ³•æå–å…³é”®è¯çŸ­è¯­">TextRankç®—æ³•æå–å…³é”®è¯çŸ­è¯­</h4>
<p>æå–å…³é”®è¯çŸ­è¯­çš„æ–¹æ³•åŸºäºå…³é”®è¯æå–ï¼Œå¯ä»¥ç®€å•è®¤ä¸ºï¼šå¦‚æœæå–å‡ºçš„<strong>è‹¥å¹²å…³é”®è¯åœ¨æ–‡æœ¬ä¸­ç›¸é‚»</strong>ï¼Œé‚£ä¹ˆæ„æˆä¸€ä¸ªè¢«æå–çš„å…³é”®çŸ­è¯­ã€‚</p>
<h4 id="textrankç”Ÿæˆæ‘˜è¦">TextRankç”Ÿæˆæ‘˜è¦</h4>
<p>ã€€ã€€å°†æ–‡æœ¬ä¸­çš„æ¯ä¸ª<strong>å¥å­åˆ†åˆ«çœ‹åšä¸€ä¸ªèŠ‚ç‚¹</strong>ï¼Œå¦‚æœä¸¤ä¸ªå¥å­æœ‰ç›¸ä¼¼æ€§ï¼Œé‚£ä¹ˆè®¤ä¸ºè¿™ä¸¤ä¸ªå¥å­å¯¹åº”çš„èŠ‚ç‚¹ä¹‹é—´å­˜åœ¨ä¸€æ¡æ— å‘æœ‰æƒè¾¹ã€‚è€ƒå¯Ÿ<strong>å¥å­ç›¸ä¼¼åº¦</strong>çš„æ–¹æ³•æ˜¯ä¸‹é¢è¿™ä¸ªå…¬å¼ï¼š</p>
<figure>
<img src="https://cdn.jsdelivr.net/gh/sunqinghu/PicRepo/img/2020/v2-6f2cdbb2e228a23d26ba303c9e958017_720w.jpg" alt="img" /><figcaption>img</figcaption>
</figure>
<blockquote>
<p>å…¬å¼ä¸­ï¼ŒSi,Sjåˆ†åˆ«è¡¨ç¤ºä¸¤ä¸ªå¥å­è¯çš„ä¸ªæ•°æ€»æ•°ï¼ŒWkè¡¨ç¤ºå¥å­ä¸­çš„è¯ï¼Œé‚£ä¹ˆåˆ†å­éƒ¨åˆ†çš„æ„æ€æ˜¯<strong>åŒæ—¶å‡ºç°åœ¨ä¸¤ä¸ªå¥å­ä¸­çš„åŒä¸€ä¸ªè¯çš„ä¸ªæ•°</strong>ï¼Œåˆ†æ¯æ˜¯å¯¹å¥å­ä¸­è¯çš„ä¸ªæ•°æ±‚å¯¹æ•°ä¹‹å’Œã€‚åˆ†æ¯è¿™æ ·è®¾è®¡å¯ä»¥<strong>éåˆ¶è¾ƒé•¿çš„å¥å­åœ¨ç›¸ä¼¼åº¦è®¡ç®—ä¸Šçš„ä¼˜åŠ¿</strong>ã€‚</p>
</blockquote>
<p>æˆ‘ä»¬å¯ä»¥æ ¹æ®ä»¥ä¸Šç›¸ä¼¼åº¦å…¬å¼å¾ªç¯è®¡ç®—ä»»æ„ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´çš„ç›¸ä¼¼åº¦ï¼Œ<strong>æ ¹æ®é˜ˆå€¼å»æ‰ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´ç›¸ä¼¼åº¦è¾ƒä½çš„è¾¹è¿æ¥</strong>ï¼Œæ„å»ºå‡ºèŠ‚ç‚¹è¿æ¥å›¾ï¼Œç„¶åè®¡ç®—TextRankå€¼ï¼Œæœ€åå¯¹æ‰€æœ‰TextRankå€¼æ’åºï¼Œ<strong>é€‰å‡ºTextRankå€¼æœ€é«˜çš„å‡ ä¸ªèŠ‚ç‚¹å¯¹åº”çš„å¥å­</strong>ä½œä¸ºæ‘˜è¦ã€‚</p>
<h2 id="ç†è§£pagerank">ç†è§£PageRank</h2>
<p>PageRank (PR)æ˜¯ä¸€ç§ç”¨äºè®¡ç®—ç½‘é¡µæƒé‡çš„ç®—æ³•ã€‚æˆ‘ä»¬å¯ä»¥æŠŠ<strong>æ‰€æœ‰çš„ç½‘é¡µçœ‹åšä¸€ä¸ªæœ‰å‘å›¾</strong>ã€‚åœ¨è¿™ä¸ªå›¾ä¸­ï¼Œä¸€ä¸ªèŠ‚ç‚¹æ˜¯ä¸€ä¸ªç½‘é¡µã€‚å¦‚æœç½‘é¡µAæœ‰åˆ°ç½‘é¡µBçš„é“¾æ¥ï¼Œåˆ™å¯ä»¥è¡¨ç¤ºä¸ºAåˆ°Bçš„ä¸€æ¡æœ‰å‘è¾¹ã€‚</p>
<p>åœ¨æˆ‘ä»¬æ„é€ å®Œæ•´ä¸ªå›¾ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢çš„å…¬å¼ä¸ºç½‘é¡µåˆ†é…æƒé‡ã€‚</p>
<figure>
<img src="/img/in-post/20_07/1*hheHfLOTjPW3uSsSxWKylQ.png" alt="img" /><figcaption>img</figcaption>
</figure>
<blockquote>
<p><br /><span class="math display">$$
\sum_{æ‰€æœ‰è¿›å…¥é“¾æ¥j}\frac{jçš„æƒé‡}{jçš„å‡ºé“¾æ•°é‡}
$$</span><br /></p>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç½‘é¡µçš„æƒé‡e<strong>å–å†³äºå…¶å…¥ç«™é¡µé¢çš„æƒé‡</strong>ã€‚æˆ‘ä»¬éœ€è¦è¿è¡Œè¿™ä¸ªè¿­ä»£å¾ˆå¤šæ—¶é—´æ¥è·å¾—æœ€ç»ˆçš„æƒé‡ã€‚åˆå§‹åŒ–æ—¶ï¼Œæ¯ä¸ªç½‘é¡µçš„é‡è¦æ€§ä¸º1ã€‚</p>
</blockquote>
<h2 id="å®ç°pagerank-å®ä¾‹">å®ç°PageRank â€” å®ä¾‹</h2>
<p><img src="/img/in-post/20_07/1*DkZjlRNEjPSc8RNL7yWggA.jpeg" alt="img" style="zoom:50%;" /></p>
<p>use a <strong>matrix</strong> to represent the inbound and outbound links</p>
<p><img src="/img/in-post/20_07/1*dbzhpH6gbbraRloOz-oHmw.png" alt="img" style="zoom:33%;" /></p>
<p>According to the <code>1/|Out(Vi)|</code> from the function, we should <strong>normalize</strong> each column.</p>
<p><img src="/img/in-post/20_07/1*ppIReXWpavbuvAHfi08EGw.png" alt="img" style="zoom: 33%;" /></p>
<p>We use this matrix to <strong>multiply</strong> with the weight of all nodes.</p>
<p><img src="/img/in-post/20_07/1*n-Zp7ZjPMuw_p99UO_qDzA.jpeg" alt="img" style="zoom:50%;" /></p>
<p>We can use Python to <strong>iterate</strong> many times.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="im">import</span> numpy <span class="im">as</span> np</a>
<a class="sourceLine" id="cb1-2" data-line-number="2">g <span class="op">=</span> [[<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>],</a>
<a class="sourceLine" id="cb1-3" data-line-number="3">     [<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>],</a>
<a class="sourceLine" id="cb1-4" data-line-number="4">     [<span class="dv">1</span>, <span class="fl">0.5</span>, <span class="dv">0</span>, <span class="dv">0</span>],</a>
<a class="sourceLine" id="cb1-5" data-line-number="5">     [<span class="dv">0</span>, <span class="fl">0.5</span>, <span class="dv">0</span>, <span class="dv">0</span>]]</a>
<a class="sourceLine" id="cb1-6" data-line-number="6">g <span class="op">=</span> np.array(g)</a>
<a class="sourceLine" id="cb1-7" data-line-number="7">pr <span class="op">=</span> np.array([<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>]) <span class="co"># initialization for a, b, e, f is 1</span></a>
<a class="sourceLine" id="cb1-8" data-line-number="8">d <span class="op">=</span> <span class="fl">0.85</span></a>
<a class="sourceLine" id="cb1-9" data-line-number="9"><span class="cf">for</span> <span class="bu">iter</span> <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">10</span>):</a>
<a class="sourceLine" id="cb1-10" data-line-number="10">    pr <span class="op">=</span> <span class="fl">0.15</span> <span class="op">+</span> <span class="fl">0.85</span> <span class="op">*</span> np.dot(g, pr)</a>
<a class="sourceLine" id="cb1-11" data-line-number="11">    <span class="bu">print</span>(<span class="bu">iter</span>)</a>
<a class="sourceLine" id="cb1-12" data-line-number="12">    <span class="bu">print</span>(pr)</a></code></pre></div>
<pre><code>0
[0.15  0.15  1.425 0.575]
1
[0.15    0.15    0.34125 0.21375]
2
[0.15    0.15    0.34125 0.21375]
3
[0.15    0.15    0.34125 0.21375]
4
[0.15    0.15    0.34125 0.21375]
5
[0.15    0.15    0.34125 0.21375]
6
[0.15    0.15    0.34125 0.21375]
7
[0.15    0.15    0.34125 0.21375]
8
[0.15    0.15    0.34125 0.21375]
9
[0.15    0.15    0.34125 0.21375]
10
[0.15    0.15    0.34125 0.21375]</code></pre>
<p>We also can change the code correspondingly.</p>
<h2 id="é€šè¿‡textrankæå–å…³é”®å­—">é€šè¿‡TextRankæå–å…³é”®å­—</h2>
<p>PageRankæ˜¯ç½‘é¡µæ’åï¼ŒTextRankæ˜¯<strong>æ–‡æœ¬æ’å</strong>ã€‚PageRankä¸­çš„ç½‘é¡µå°±æ˜¯TextRankä¸­çš„æ–‡æœ¬ï¼Œæ‰€ä»¥åŸºæœ¬æ€è·¯æ˜¯ä¸€æ ·çš„ã€‚</p>
<p><img src="/img/in-post/20_07/1*JeYlqJTA5MpKsaWwHkhKQw-20210501135202741.jpeg" alt="img" style="zoom:80%;" /></p>
<p>æˆ‘ä»¬å°†æ–‡æ¡£åˆ†æˆå‡ ä¸ªå¥å­ï¼Œå¹¶ä¸”åªå­˜å‚¨å¸¦æœ‰<strong>ç‰¹å®šPOSæ ‡ç­¾</strong>çš„å•è¯ã€‚æˆ‘ä»¬ä½¿ç”¨<code>spaCy</code>è¿›è¡Œè¯æ€§æ ‡æ³¨ã€‚</p>
<p>æˆ‘ä»¬æŠŠè¿™ä¸€æ®µåˆ†æˆä¸‰å¥è¯ã€‚</p>
<p>å› ä¸ºå¥å­ä¸­çš„å¤§å¤šæ•°å•è¯å¯¹ç¡®å®šé‡è¦æ€§æ²¡æœ‰ç”¨å¤„ï¼Œæˆ‘ä»¬<strong>åªè€ƒè™‘å¸¦æœ‰åè¯ã€PROPNã€åŠ¨è¯è¯æ€§æ ‡ç­¾çš„å•è¯</strong>ã€‚è¿™æ˜¯å¯é€‰çš„ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨æ‰€æœ‰çš„å•è¯ã€‚</p>
<p>Output</p>
<pre><code>[[Wandering, Earth, described, China, budget, science, fiction, thriller, screens, AMC, theaters, North, America, weekend, shows, filmmaking, focused, spectacles, China, epics], [time, Wandering, Earth, feels, throwback, eras, filmmaking], [film, cast, setting, tone, science, fiction, fans, going, lot, screen, reminds, movies]]</code></pre>
<p>æ¯ä¸ªå•è¯éƒ½æ˜¯PageRankä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹ã€‚æˆ‘ä»¬å°†çª—å£å¤§å°è®¾ä¸ºkã€‚</p>
<figure>
<img src="/img/in-post/20_07/1*YdjbC0NcNnAkGf3sWPTAiA.png" alt="1*YdjbC0NcNnAkGf3sWPTAiA" /><figcaption>1*YdjbC0NcNnAkGf3sWPTAiA</figcaption>
</figure>
<p><span class="math inline">[<em>w</em>1,â€†<em>w</em>2,â€†<em>w</em><sub><em>k</em></sub>]ã€[<em>w</em>2,â€†<em>w</em>3,â€†<em>w</em><sub><em>k</em>â€…+â€…1</sub>],â€†[<em>w</em>3,â€†<em>w</em>4,â€†<em>w</em><sub><em>k</em>â€…+â€…2</sub>]</span>ä¸º<code>windows</code>ã€‚æˆ‘ä»¬è®¤ä¸º<strong>çª—å£ä¸­çš„ä»»ä½•ä¸¤å­—å¯¹éƒ½æœ‰æ— å‘è¾¹</strong>ã€‚</p>
<p>æˆ‘ä»¬ä»¥[time, Wandering, Earth, feels, throwback, eras, filmmaking]ä¸ºä¾‹ï¼Œå°†çª—å£å¤§å°è®¾ä¸ºk=4ï¼Œæ‰€ä»¥æˆ‘ä»¬å¾—åˆ°äº†4ä¸ªçª—å£ï¼Œ[time, Wandering, Earth, feels, throwback]ï¼Œ [Earth, feels, throwback, eras]ï¼Œ [feels, throwback, eras, filmmaking]ã€‚</p>
<p>å¯¹äº[time, Wandering, Earth, feels]ï¼Œä»»ä½•ä¸¤ä¸ªè¯å¯¹éƒ½æœ‰ä¸€ä¸ªæ— å‘è¾¹ã€‚æˆ‘ä»¬å¾—åˆ°(time, Wandering), (time, Earth), (time, feels), (Wandering, Earth), (Wandering, feels), (Earth, feels)</p>
<p>æ ¹æ®è¿™ä¸ªå›¾ï¼Œæˆ‘ä»¬å¯ä»¥<strong>è®¡ç®—æ¯ä¸ªèŠ‚ç‚¹(å•è¯)çš„æƒé‡</strong>ã€‚æœ€é‡è¦çš„è¯å¯ä»¥ç”¨ä½œå…³é”®è¯ã€‚ğŸš©</p>
<h2 id="å…³é”®è¯æå–çš„å®ç°">å…³é”®è¯æå–çš„å®ç°</h2>
<p>åœ¨è¿™é‡Œï¼Œæˆ‘ç”¨Pythonå®ç°äº†ä¸€ä¸ªå®Œæ•´çš„ç¤ºä¾‹ï¼Œæˆ‘ä»¬ä½¿ç”¨spaCyæ¥è·å–å•è¯çš„POSæ ‡è®°ã€‚</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb4-1" data-line-number="1">text <span class="op">=</span> <span class="st">&#39;&#39;&#39;</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="st">The Wandering Earth, described as Chinaâ€™s first big-budget science fiction thriller, quietly made it onto screens at AMC theaters in North America this weekend, and it shows a new side of Chinese filmmaking â€” one focused toward futuristic spectacles rather than Chinaâ€™s traditionally grand, massive historical epics. At the same time, The Wandering Earth feels like a throwback to a few familiar eras of American filmmaking. While the filmâ€™s cast, setting, and tone are all Chinese, longtime science fiction fans are going to see a lot on the screen that reminds them of other movies, for better or worse.</span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="st">&#39;&#39;&#39;</span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"></a>
<a class="sourceLine" id="cb4-5" data-line-number="5">tr4w <span class="op">=</span> TextRank4Keyword()</a>
<a class="sourceLine" id="cb4-6" data-line-number="6">tr4w.analyze(text, candidate_pos <span class="op">=</span> [<span class="st">&#39;NOUN&#39;</span>, <span class="st">&#39;PROPN&#39;</span>], window_size<span class="op">=</span><span class="dv">4</span>, lower<span class="op">=</span><span class="va">False</span>)</a>
<a class="sourceLine" id="cb4-7" data-line-number="7">tr4w.get_keywords(<span class="dv">10</span>)</a></code></pre></div>
<p>Output</p>
<pre><code>science - 1.717603106506989
fiction - 1.6952610926181002
filmmaking - 1.4388798751402918
China - 1.4259793786986021
Earth - 1.3088154732297723
tone - 1.1145002295684114
Chinese - 1.0996896235078055
Wandering - 1.0071059904601571
weekend - 1.002449354657688
America - 0.9976329264870932
budget - 0.9857269586649321
North - 0.9711240881032547</code></pre>
<h1 id="å‚è€ƒ">å‚è€ƒ</h1>
<p><a href="https://towardsdatascience.com/textrank-for-keyword-extraction-by-python-c0bae21bcec0">Understand TextRank for Keyword Extraction by Python</a></p>
